{% from "scenarios/intents/common.nlg" import tts_pause %}
{% from "get_weather/get_weather__common.nlg" import temp, min_max_temp, format_date %}

{% macro choose_hello() %}
  {% if is_yandex_drive() %}
    {% chooseline %}
      Привет
      Здравствуйте
      Приветствую
      Рада вас видеть
      Здорово, что вы здесь
      Вот вы и в Драйве
      Устраивайтесь поудобнее
      Наконец-то вы здесь
      С возвращением
      Ура, вы снова с нами
    {% endchooseline %}
  {% else %}
    {% chooseline %}
      Привет
      Здравствуйте
      Рада вас видеть
      Устраивайтесь поудобнее
      Наконец-то вы здесь
      С возвращением
      Ура, вы снова с нами
    {% endchooseline %}
  {% endif %}
{% endmacro %}


{% macro start_greeting() %}
  {{ choose_hello() }}
  {% if (form.first_name) %}
    , {{ form.first_name }}
  {% endif %}
  .
{% endmacro %}

{% macro add_weather() %}
  {% if (form.weather_temp_current) %}
    {% chooseline %}
      Сейчас 
      За бортом 
      За окном 
      О погоде: 
    {% endchooseline %}
    {{ temp(form.weather_temp_current) }},
    {{ form.weather_type_current | lower }}.
  {% endif %}
{% endmacro %}

{% macro add_traffic() %}
  {% if (form.traffic_info) %}
    {% chooseline %}
      На дорогах 
      В пробках 
      Пробки 
      Оцениваем дороги на 
    {% endchooseline %}
    {{ form.traffic_info.level }}
    {{ "балл" | pluralize(form.traffic_info.level) }}.
  {% endif %}
{% endmacro %}

{% macro music_promo() %}
  {% chooseline %}
    А ещё у нас есть много музыки хорошей и разной!
    Включайте любимую музыку — с ней как-то поприятнее.
    Включайте музыкальные подборки для любого вашего настроения!
    Включайте музыку без перерыва и выходных.
    Включайте {%vc%}Яндекс Музыку{%evc%}{%tx%}Яндекс.Музыку{%etx%}, она всё меняет
    Включая {%vc%}Яндекс Музыку{%evc%}{%tx%}Яндекс.Музыку{%etx%}, вы задаете настроение этой поездки.
    В машине есть {%vc%}Яндекс Музыка{%evc%}{%tx%}Яндекс.Музыка{%etx%}, так что звук на максимум!
    Давайте включим {%vc%}Яндекс Музыку{%evc%}{%tx%}Яндекс.Музыку{%etx%}? Выбирайте сами, мне все нравится.
    Если вы зеваете, включайте музыку погромче!
    Знаете, если поедем с {%vc%}Яндекс Музыкой{%evc%}{%tx%}Яндекс.Музыкой{%etx%}, будет веселее
    Как настроение? Тут есть музыкальные подборки под любое - просто включайте, и вперед.
    Куда бы ни лежал ваш путь, не забудьте включить в него музыку.
    Музыка вдохновляет на целый день!
    Откройтесь новому и послушайте вместо музыки подкаст.
    Подпевайте с {%vc%}Яндекс Музыкой{%evc%}{%tx%}Яндекс.Музыкой{%etx%}, будто никто не слышит.
    Поедем с {%vc%}Яндекс Музыкой{%evc%}{%tx%}Яндекс.Музыкой{%etx%}? А встанем в пробку - перейдем на подкасты.
    Поездка будет приятнее, если включить {%vc%}Яндекс Музыку{%evc%}{%tx%}Яндекс.Музыку{%etx%}.
    Послушайте, кто в чартах на {%vc%}Яндекс Музыке{%evc%}{%tx%}Яндекс.Музыке{%etx%}!
    Пусть в дороге звучат только любимые песни на {%vc%}Яндекс Музыке{%evc%}{%tx%}Яндекс.Музыке{%etx%}!
    Пусть дорога пройдёт как по нотам с {%vc%}Яндекс Музыкой{%evc%}{%tx%}Яндекс.Музыкой{%etx%}!
    Слушайте лучше с {%vc%}Яндекс Музыкой{%evc%}{%tx%}Яндекс.Музыкой{%etx%}!
    С музыкой любая дорога пролетит незаметно.
    Тут есть {%vc%}Яндекс Музыка{%evc%}{%tx%}Яндекс.Музыка{%etx%}. Включайте и подпевайте, я никому не скажу.
    Тут появилась {%vc%}Яндекс Музыка{%evc%}{%tx%}Яндекс.Музыка{%etx%}, а в ней подкасты. Можно послушать пока едем.
    У вас есть 50 миллионов треков и подкасты, хватит на любой маршрут!
    У вас есть маршрут, а у нас новые треки на {%vc%}Яндекс Музыке{%evc%}{%tx%}Яндекс.Музыке{%etx%}.
    Хороших вам попутчиков и музыки. Поехали!
    Хорошо, что есть {%vc%}Яндекс Музыка{%evc%}{%tx%}Яндекс.Музыка{%etx%}, можно подпевать всю дорогу.
  {% endchooseline %}
{% endmacro %}

{% macro music_promo_with_autostarts() %}
  {% chooseline %}
    Ваша новая поездка начинается с {%vc%}Яндекс Музыки{%evc%}{%tx%}Яндекс.Музыки{%etx%}
    Ваше новое путешествие начинается с музыки!
    Включаем драйфовую {%vc%}Яндекс Музыку{%evc%}{%tx%}Яндекс.Музыку{%etx%} для вас!
    Вместо радио будет играть {%vc%}Яндекс Музыка{%evc%}{%tx%}Яндекс.Музыка{%etx%}!
    В ритме вашего маршрута играет музыка!
    Для вас будет играть {%vc%}Яндекс Музыка{%evc%}{%tx%}Яндекс.Музыка{%etx%}!
    Звук на максимум!
  {% endchooseline %}
{% endmacro %}

{% phrase render_result %}
  {{ tts_pause(1500) }}
  {% if form.phrase != None %}
    {{ form.phrase }}
  {% else %}
    {{ start_greeting() }}
  {% endif %}

  {% if not is_yandex_drive() %}
    {{ add_weather() }}
  {% endif %}
  {{ add_traffic() }}

  {% if form.promo and form.promo == "music" %}
    {% if req_info.experiments['auto_music_promo'] != None %}
      {% chooseline %}
        {{ music_promo() }}
        {{ music_promo_with_autostarts() }}
      {% endchooseline %}
    {% elif req_info.experiments['auto_music_promo_without_music_start'] != None %}
      {{ music_promo() }}
    {% endif %}
  {% endif %}
{% endphrase %}


