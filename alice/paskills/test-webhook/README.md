## Вебхук для стрельб по dialogovo

В директории `../dialogovo/src/test/integration` есть различные кейсы ответа вебхука и ождаемого ответа. На основе этих ответов можно
собрать webhook который будет отвечать нужным кейсом в зависимости от переданных аргументов.

### Сборка

Для сборки докер образа и аплоада его в реджистри необходимо выполнить команду:

```bash
./package.sh --docker-push
```

При сборке будут использованы кейсы из текущей директории `src/test/integration`

### Использование

Навык назвернут в QLOUD в тестинге

При запуске сервера можно передать аргументы:
* `-p` (`--port`) - порт на котором запустить вебхук
* `-d` (`--dir`) - директорию для поиска ответов вебхука

Для получения нужного кейса в ответе необходимо обраться `POST` запросом:
```bash
curl -XPOST http://localhost:8080/voice_text_buttons_1-1000
```

в общем виде: `http://localhost:8080/<название директории из директории integration>-<задержка в ms>`

Так же можно получить нужный кейс, передав в теле POST запроса по протоколу вебхука в поле `meta.client_id` строку вида
`dialogovo.webhook/voice_text_buttons_1-1000 (Yandex yandexstation; android 1.0)`
(это используетя при генерации патронов для нагрузочного тестирования)