# coding: utf-8
# –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫—É UTF-8.
from __future__ import unicode_literals
import random

# –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –º–æ–¥—É–ª–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å JSON –∏ –ª–æ–≥–∞–º–∏.
import json
import logging

# –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –ø–æ–¥–º–æ–¥—É–ª–∏ Flask –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –≤–µ–±-—Å–µ—Ä–≤–∏—Å–∞.

from __builtin__ import str
from flask import Flask, request
app = Flask(__name__)


logging.basicConfig(level=logging.DEBUG)

# –•—Ä–∞–Ω–∏–ª–∏—â–µ –¥–∞–Ω–Ω—ã—Ö –æ —Å–µ—Å—Å–∏—è—Ö.
sessionStorage = {}

# –ó–∞–¥–∞–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è Flask.
@app.route("/", methods=['POST'])

def main():
# –§—É–Ω–∫—Ü–∏—è –ø–æ–ª—É—á–∞–µ—Ç —Ç–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—Ç–≤–µ—Ç.
    logging.info('Request: %r', request.json)

    response = {
        "version": request.json['version'],
        "session": request.json['session'],
        "response": {
            "end_session": False
        }
    }

    handle_dialog(request.json, response)

    logging.info('Response: %r', response)

    return json.dumps(
        response,
        ensure_ascii=False,
        indent=2
    )


def handle_dialog(req, res):
    user_id = req['session']['user_id']

    if req['session']['new']:
        # –≠—Ç–æ –Ω–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å.
        # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º —Å–µ—Å—Å–∏—é –∏ –ø–æ–ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É–µ–º –µ–≥–æ.

        sessionStorage[user_id] = {
            'suggests': [
                "–∫–∞—Ä—Ç–∏–Ω–∫–∞",
                "–∫–∞—Ä—Ç–∏–Ω–∫–∏",
                "–ø–µ—Ä–µ–Ω–æ—Å",
                "–±–µ–∑ –∫–∞—Ä—Ç–∏–Ω–∫–∏"
                "—Å–º–∞–π–ª–∏–∫",
                "ü§î"

            ]
        }

        res['response']['text'] = '–¢–µ—Å—Ç–æ–≤—ã–π –Ω–∞–≤—ã–∫ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Ñ—É–≥–∫—Ü–∏–æ–Ω–∞–ª–∞ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–Ω–∏—è\n' \
                                  '–ö–æ–º–∞–Ω–¥–∞ "–∫–∞—Ä—Ç–∏–Ω–∫–∞" - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–∞—Ä—Ç–æ—á–∫—É —Å 1–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º\n' \
                                  '–ö–æ–º–∞–Ω–¥—ã "–ø–µ—Ä–µ–Ω–æ—Å", –ø–µ—Ä–µ–Ω–æ—Å2, –ø–µ—Ä–µ–Ω–æ—Å3, –ø–µ—Ä–µ–Ω–æ—Å4 - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–µ–∫—Å—Ç –≤ –∫–æ—Ç–æ—Ä–æ–º –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç –ø–µ—Ä–µ–Ω–æ—Å\n' \
                                  '–ö–æ–º–∞–Ω–¥–∞ "–∫–∞—Ä—Ç–∏–Ω–∫–∏" - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≥–∞–ª–µ—Ä–µ—é —Å –∫–∞—Ä—Ç–∏–Ω–∫–∞–º–∏\n' \
                                  '–ö–æ–º–∞–Ω–¥–∞ "–±–µ–∑ –∫–∞—Ä—Ç–∏–Ω–∫–∏" - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç  –æ–±—ã—á–Ω—ã–π –æ—Ç–≤–µ—Ç\n' \
                                  '–ö–æ–º–∞–Ω–¥–∞ "—Å–º–∞–π–ª–∏–∫" - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–º–∞–π–ª–∏–∫\n'\
                                  '–ö–æ–º–∞–Ω–¥–∞ ü§î - –æ—Ç–≤–µ—á–∞–µ—Ç —Å–º–∞–π–ª–∏–∫–æ–º –≤ –æ—Ç–≤–µ—Ç'


        res['response']['buttons'] = get_suggests(user_id)
        return


# –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –æ—Ç–≤–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

        # utt = req['request']['original_utterance'].lower()
    utt = req['request']['original_utterance'].lower() if 'original_utterance' in req['request'] else ''


    if utt in [
        '–ø–µ—Ä–µ–Ω–æ—Å'
    ]:
        res['response'] = {
             "text": " –í –ú–ò–î–µ –ø—Ä–æ–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–ª–∏ —É—á–µ–Ω–∏—è –ù–ê–¢–û Trident Junction. \n–ò–Ω—Ç–µ—Ä–µ—Å–Ω–æ?",
             "tts": "–í –ú–ò–î–µ –ø—Ä–æ–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–ª–∏ —É—á–µ–Ω–∏—è –ù–ê–¢–û Trident Junction. - –ò–Ω—Ç–µ—Ä–µ—Å–Ω–æ?",
                "buttons": [
                    {
                        "title": "–¥–∞",
                        #"payload": {},
                        #"text": '–¥–∞',
                        "hide": True
                    }
                ],
        }
        return

    if utt in [
        '–ø–µ—Ä–µ–Ω–æ—Å2'
    ]:
        res['response'] = {
             "text": " –í –ú–ò–î–µ –ø—Ä–æ–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–ª–∏ —É—á–µ–Ω–∏—è –ù–ê–¢–û Trident Junction. \\n–ò–Ω—Ç–µ—Ä–µ—Å–Ω–æ?",
             "tts": "–í –ú–ò–î–µ –ø—Ä–æ–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–ª–∏ —É—á–µ–Ω–∏—è –ù–ê–¢–û Trident Junction. - –ò–Ω—Ç–µ—Ä–µ—Å–Ω–æ?",
                "buttons": [
                    {
                        "title": "–¥–∞",
                         #"payload": {},
                        #"text": '–¥–∞',
                        "hide": True
                    }
                ],
        }
        return

    if utt in [
        '–ø–µ—Ä–µ–Ω–æ—Å3'
    ]:
        res['response'] = {
            "text": " –í –ú–ò–î–µ –ø—Ä–æ–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–ª–∏ —É—á–µ–Ω–∏—è –ù–ê–¢–û Trident Junction. \\\n–ò–Ω—Ç–µ—Ä–µ—Å–Ω–æ?",
            "tts": "–í –ú–ò–î–µ –ø—Ä–æ–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–ª–∏ —É—á–µ–Ω–∏—è –ù–ê–¢–û Trident Junction. - –ò–Ω—Ç–µ—Ä–µ—Å–Ω–æ?",
            "buttons": [
                {
                    "title": "–¥–∞",
                    #"payload": {},
                    #"text": '–¥–∞',
                    "hide": True
                }
            ],
        }
        return

    if utt in [
        '–ø–µ—Ä–µ–Ω–æ—Å4'
    ]:
        res['response'] = {
            "text": " –í –ú–ò–î–µ –ø—Ä–æ–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–ª–∏ —É—á–µ–Ω–∏—è –ù–ê–¢–û Trident Junction. \n–ò–Ω—Ç–µ\n—Ä–µ—Å–Ω–æ?",
            "tts": "–í –ú–ò–î–µ –ø—Ä–æ–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–ª–∏ —É—á–µ–Ω–∏—è –ù–ê–¢–û Trident Junction. - –ò–Ω—Ç–µ—Ä–µ—Å–Ω–æ?",
            "buttons": [
                {
                    "title": "–¥–∞",
                    #"payload": {},
                    #"text": '–¥–∞',
                    "hide": True
                }
            ],
        }
        return


    if utt in [
        '—Å–º–∞–π–ª–∏–∫'
    ]:
        res['response'] = {
            "text": " –ü–æ–ª—É—á–∏ —Å–º–∞–π–ª–∏–∫ ü§îü§î",
            "tts": "–ü–æ–ª—É—á–∏ —Å–º–∞–π–ª–∏–∫",
            "buttons": [
                {
                    "title": "–¥–∞",
                    #"payload": {},
                    #"text": '–¥–∞',
                    "hide": True
                }
            ],
        }
        return


    if utt in [
        'ü§î'
    ]:
        res['response'] = {
            "text": " –ü–æ–ª—É—á–∏ —Å–º–∞–π–ª–∏–∫ ü§îü§î",
            "tts": "–ü–æ–ª—É—á–∏ —Å–º–∞–π–ª–∏–∫",
            "buttons": [
                {
                    "title": "–¥–∞",
                    #"payload": {},
                    #"text": '–¥–∞',
                    "hide": True
                }
            ],
        }
        return


    if utt in [
        '–¥–∞'
    ]:
        res['response'] = {
            "text": "–ë—Ä–∏—Ç–∞–Ω—Å–∫–∏–π –∂—É—Ä–Ω–∞–ª–∏—Å—Ç –¢–æ–º –û—É –≤ —Å—Ç–∞—Ç—å–µ –¥–ª—è The Telegraph —Ä–∞—Å—Å–∫–∞–∑–∞–ª –æ –ø–µ—Ä–≤–æ–º –ø–æ—Å–µ—â–µ–Ω–∏–∏ —Ä—É—Å—Å–∫–æ–π –±–∞–Ω–∏ –≤ –õ–æ–Ω–¥–æ–Ω–µ. "
                    "–û—É —Ä–µ—à–∏–ª –ø–æ–π—Ç–∏ –≤ –æ–¥–Ω—É –∏–∑ —Å–∞–º—ã—Ö –∑–Ω–∞–º–µ–Ω–∏—Ç—ã—Ö –±–∞–Ω—å –±—Ä–∏—Ç–∞–Ω—Å–∫–æ–π —Å—Ç–æ–ª–∏—Ü—ã, ¬´–ë–∞–Ω—é ‚Ññ 1¬ª, –∫–æ—Ç–æ—Ä—É—é, –∫–∞–∫ –æ–Ω –æ—Ç–º–µ—Ç–∏–ª, "
                    "–ª—é–±—è—Ç –ø–æ—Å–µ—â–∞—Ç—å –ö–µ–π—Ç –ú–æ—Å—Å, –î–∂–∞—Å—Ç–∏–Ω –ë–∏–±–µ—Ä, –≠–º–∏–ª–∏—è –ö–ª–∞—Ä–∫ –∏ –¥—Ä—É–≥–∏–µ –∑–Ω–∞–º–µ–Ω–∏—Ç–æ—Å—Ç–∏. "
                    "–í–æ –≤—Ä–µ–º—è –º–∞—Å—Å–∞–∂–∞ –±–µ—Ä–µ–∑–æ–≤—ã–º –≤–µ–Ω–∏–∫–æ–º, –∫–æ—Ç–æ—Ä—ã–π –∂—É—Ä–Ω–∞–ª–∏—Å—Ç –æ–∫—Ä–µ—Å—Ç–∏–ª ¬´–æ—Ä—É–∂–∏–µ–º –≤–æ–π–Ω—ã¬ª, "
                    "–û—É –∫–∞–∑–∞–ª–æ—Å—å, —á—Ç–æ –µ–≥–æ ¬´–±—å–µ—Ç –±–æ–ª—å—à–æ–µ –¥–µ—Ä–µ–≤–æ –≤–æ –≤—Ä–µ–º—è –ª–∏–≤–Ω—è¬ª.\n¬´–†–∞—Å—Å–ª–∞–±–ª–µ–Ω–∏–µ ‚Äî —ç—Ç–æ –ª—é–±–æ–ø—ã—Ç–Ω–∞—è –≤–µ—â—å, —Ä–∞–∑–º—ã—à–ª—è–ª —è, –ø–æ–≥–ª—è–¥—ã–≤–∞—è –∏–∑-–ø–æ–¥ –±–µ–ª–æ–π —à–ª—è–ø—ã "
                    "–≤ —Å—Ç–∏–ª–µ –≥–æ–ª–æ–≤–Ω–æ–≥–æ —É–±–æ—Ä–∞ –°–º—É—Ä—Ñ–∏–∫–æ–≤, –∫–æ–≥–¥–∞ –±–æ—Ä–æ–¥–∞—Ç—ã–π –±–æ–¥–∏–±–∏–ª–¥–µ—Ä —Ö–ª–µ—Å—Ç–∞–ª –º–æ—é –æ–±–Ω–∞–∂–µ–Ω–Ω—É—é "
                    "—Å–ø–∏–Ω—É —Ä–∞—Å–ø–∞—Ä–µ–Ω–Ω—ã–º –±–µ—Ä–µ–∑–æ–≤—ã–º –≤–µ–Ω–∏–∫–æ–º¬ª, ‚Äî –≤—Å–ø–æ–º–∏–Ω–∞–µ—Ç —Ä–µ–ø–æ—Ä—Ç–µ—Ä. "
                    "–û–¥–Ω–∞–∫–æ –ø–æ—Å–ª–µ –∫—É–ø–∞–Ω–∏—è –≤ –ª–µ–¥—è–Ω–æ–π –≤–æ–¥–µ —Å–º—É—â–µ–Ω–∏–µ –∂—É—Ä–Ω–∞–ª–∏—Å—Ç–∞ —É—à–ª–æ –Ω–∞ –≤—Ç–æ—Ä–æ–π –ø–ª–∞–Ω, "
                    "–∏ –æ–Ω –ø–æ—á—É–≤—Å—Ç–≤–æ–≤–∞–ª —Å–µ–±—è ¬´–Ω–µ–º–Ω–æ–≥–æ –ø–æ—Å–≤–µ–∂–µ–≤—à–∏–º –∏ –≤ —Ü–µ–ª–æ–º –±–æ–ª–µ–µ —Ä–∞—Å—Å–ª–∞–±–ª–µ–Ω–Ω—ã–º¬ª",
            "tts": "–ë—Ä–∏—Ç–∞–Ω—Å–∫–∏–π –∂—É—Ä–Ω–∞–ª–∏—Å—Ç –¢–æ–º –û—É –≤ —Å—Ç–∞—Ç—å–µ –¥–ª—è The Telegraph —Ä–∞—Å—Å–∫–∞–∑–∞–ª –æ –ø–µ—Ä–≤–æ–º –ø–æ—Å–µ—â–µ–Ω–∏–∏ —Ä—É—Å—Å–∫–æ–π –±–∞–Ω–∏ –≤ –õ–æ–Ω–¥–æ–Ω–µ. "
                   "–û—É —Ä–µ—à–∏–ª –ø–æ–π—Ç–∏ –≤ –æ–¥–Ω—É –∏–∑ —Å–∞–º—ã—Ö –∑–Ω–∞–º–µ–Ω–∏—Ç—ã—Ö –±–∞–Ω—å –±—Ä–∏—Ç–∞–Ω—Å–∫–æ–π —Å—Ç–æ–ª–∏—Ü—ã, ¬´–ë–∞–Ω—é ‚Ññ 1¬ª, "
                   "–∫–æ—Ç–æ—Ä—É—é, –∫–∞–∫ –æ–Ω –æ—Ç–º–µ—Ç–∏–ª, –ª—é–±—è—Ç –ø–æ—Å–µ—â–∞—Ç—å –ö–µ–π—Ç –ú–æ—Å—Å, \n–î–∂–∞—Å—Ç–∏–Ω –ë–∏–±–µ—Ä, –≠–º–∏–ª–∏—è –ö–ª–∞—Ä–∫ –∏ –¥—Ä—É–≥–∏–µ –∑–Ω–∞–º–µ–Ω–∏—Ç–æ—Å—Ç–∏. "
                   "–í–æ –≤—Ä–µ–º—è –º–∞—Å—Å–∞–∂–∞ –±–µ—Ä–µ–∑–æ–≤—ã–º –≤–µ–Ω–∏–∫–æ–º, –∫–æ—Ç–æ—Ä—ã–π –∂—É—Ä–Ω–∞–ª–∏—Å—Ç –æ–∫—Ä–µ—Å—Ç–∏–ª ¬´–æ—Ä—É–∂–∏–µ–º –≤–æ–π–Ω—ã¬ª, "
                   "–û—É –∫–∞–∑–∞–ª–æ—Å—å, —á—Ç–æ –µ–≥–æ ¬´–±—å–µ—Ç –±–æ–ª—å—à–æ–µ –¥–µ—Ä–µ–≤–æ –≤–æ –≤—Ä–µ–º—è –ª–∏–≤–Ω—è¬ª. "
                   "¬´–†–∞—Å—Å–ª–∞–±–ª–µ–Ω–∏–µ ‚Äî —ç—Ç–æ –ª—é–±–æ–ø—ã—Ç–Ω–∞—è –≤–µ—â—å, —Ä–∞–∑–º—ã—à–ª—è–ª —è, –ø–æ–≥–ª—è–¥—ã–≤–∞—è –∏–∑-–ø–æ–¥ –±–µ–ª–æ–π —à–ª—è–ø—ã –≤ —Å—Ç–∏–ª–µ –≥–æ–ª–æ–≤–Ω–æ–≥–æ —É–±–æ—Ä–∞ –°–º—É—Ä—Ñ–∏–∫–æ–≤, "
                   "–∫–æ–≥–¥–∞ –±–æ—Ä–æ–¥–∞—Ç—ã–π –±–æ–¥–∏–±–∏–ª–¥–µ—Ä —Ö–ª–µ—Å—Ç–∞–ª –º–æ—é –æ–±–Ω–∞–∂–µ–Ω–Ω—É—é —Å–ø–∏–Ω—É —Ä–∞—Å–ø–∞—Ä–µ–Ω–Ω—ã–º –±–µ—Ä–µ–∑–æ–≤—ã–º –≤–µ–Ω–∏–∫–æ–º¬ª, ‚Äî –≤—Å–ø–æ–º–∏–Ω–∞–µ—Ç —Ä–µ–ø–æ—Ä—Ç–µ—Ä. "
                   "–û–¥–Ω–∞–∫–æ –ø–æ—Å–ª–µ –∫—É–ø–∞–Ω–∏—è –≤ –ª–µ–¥—è–Ω–æ–π –≤–æ–¥–µ —Å–º—É—â–µ–Ω–∏–µ –∂—É—Ä–Ω–∞–ª–∏—Å—Ç–∞ —É—à–ª–æ –Ω–∞ –≤—Ç–æ—Ä–æ–π –ø–ª–∞–Ω, "
                   "–∏ –æ–Ω –ø–æ—á—É–≤—Å—Ç–≤–æ–≤–∞–ª —Å–µ–±—è ¬´–Ω–µ–º–Ω–æ–≥–æ –ø–æ—Å–≤–µ–∂–µ–≤—à–∏–º –∏ –≤ —Ü–µ–ª–æ–º –±–æ–ª–µ–µ —Ä–∞—Å—Å–ª–∞–±–ª–µ–Ω–Ω—ã–º¬ª.",
            "buttons": [
                {
                    "title": "–¥–∞",
                    #"payload": {},
                    #"text": '–¥–∞',
                    "hide": True
                }
            ],
        }
        return


    if utt in [
        '–∫–∞—Ä—Ç–∏–Ω–∫–∞'
    ]:
        res['response']= {
            "text": "–ü—Ä–∏–≤–µ—Ç –º–µ–Ω—è –∑–æ–≤—É—Ç –ø–µ–ø–µ",
            "tts": "–ü—Ä–∏–≤–µ—Ç –º–µ–Ω—è –∑–æ–≤—É—Ç –ø+–µ–ø–µ",
            "card": {
                "type": "BigImage",
                "image_id": "965417/74523f4ec543400f93d5",
                "title": "pepe is live",
                "description": "pepe is live",
                "button": {
                    "text": "pepe mode on",
                    "url": "https://www.reddit.com/r/pepe/",
                    "payload": {}
                }
            },
            "buttons": [
                {
                    "title": "pepe mode on",
                    "payload": {},
                    "url": "https://yandex.ru",
                    "hide": True
                }
            ],
        }
        return

    if utt in [
        '–∫–∞—Ä—Ç–∏–Ω–∫–∏'
    ]:
        res['response'] = {
            "text": "–ü–æ—Å–º–æ—Ç—Ä–∏ –∫–æ–ª–ª–µ–∫—Ü–∏—é —Ä–∞—Ä–Ω—ã—Ö –ø–µ–ø–µ",
            "tts": "–ü–æ—Å–º–æ—Ç—Ä–∏ –∫–æ–ª–ª–µ–∫—Ü–∏—é —Ä–∞—Ä–Ω—ã—Ö –ø–µ–ø–µ.",
            "card": {
                "type": "ItemsList",
                "header": {
                    "text": "make pepe great again18",
                },
                "items": [
                    {
                        "image_id": "937455/c88344a17b4872ad61d0",
                        "title": "make pepe great again14",
                        "description": "make pepe great again13",
                        "button": {
                            "text": "make pepe great again12",
                            "url": "https://www.reddit.com/r/pepe/",
                            "payload": {},
                            "hide": True
                        }
                    },

                    {
                        "image_id": "937455/7e58ff315f3fa752122e",
                        "title": "make pepe great again7",
                        "description": "make pepe great again9",
                        "button": {
                            "text": "make pepe great again1",
                            "url": "https://www.reddit.com/r/pepe/",
                            "payload": {},
                            "hide": True
                        }
                    },


                    {
                        "image_id": "213044/20799e131767645b7641",
                        "title": "make pepe great again7",
                        "description": "make pepe great again11",
                        "button": {
                            "text": "make pepe great again2",
                            "url": "https://www.reddit.com/r/pepe/",
                            "payload": {},
                            "hide": True,
                        }
                    }


                ],
                "footer": {
                    "text": "make pepe great again5",
                    "button": {
                        "text": "make pepe great again3",
                        "url": "https://www.reddit.com/r/pepe/",
                        "payload": {},
                        "hide": True
                    }
                }
            },
            "buttons": [
                {
                    "title": "make pepe great again4",
                    "payload": {},
                    "url": "https://www.reddit.com/r/pepe/",
                    "hide": True
                }
            ],

        }
        return


    if utt in [
        '–±–µ–∑ –∫–∞—Ä—Ç–∏–Ω–∫–∏'
    ]:
        res['response'] = {

                "text": "–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! –≠—Ç–æ –º—ã, —Ö–æ—Ä–æ–≤–æ–¥–æ–≤–µ–¥—ã.",
                "tts": "–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! –≠—Ç–æ –º—ã, —Ö–æ—Ä–æ–≤+–æ–¥–æ –≤+–µ–¥—ã.",
                "buttons": [
                    {
                        "title": "–¥–∞",
                        "payload": {},
                        "url": "https://yandex.ru",
                        "hide": True
                    }
                ],
        }

    res['response']['text'] = '–¢—ã –º–µ–Ω—è —Å–ª–æ–º–∞–ª'


# –§—É–Ω–∫—Ü–∏—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–≤–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏ –¥–ª—è –æ—Ç–≤–µ—Ç–∞.
def get_suggests(user_id):
    session = sessionStorage[user_id]

    # –í—ã–±–∏—Ä–∞–µ–º —á–µ—Ç—ã—Ä–µ –ø–µ—Ä–≤—ã–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏ –∏–∑ –º–∞—Å—Å–∏–≤–∞.
    suggests = [
        {'title': suggest, 'hide': True}
        for suggest in session['suggests'][:4]
    ]

    # –£–±–∏—Ä–∞–µ–º –ø–µ—Ä–≤—É—é –ø–æ–¥—Å–∫–∞–∑–∫—É, —á—Ç–æ–±—ã –ø–æ–¥—Å–∫–∞–∑–∫–∏ –º–µ–Ω—è–ª–∏—Å—å –∫–∞–∂–¥—ã–π —Ä–∞–∑.
    session['suggests'] = session['suggests'][1:]
    sessionStorage[user_id] = session

    # –ï—Å–ª–∏ –æ—Å—Ç–∞–ª–∞—Å—å —Ç–æ–ª—å–∫–æ –æ–¥–Ω–∞ –ø–æ–¥—Å–∫–∞–∑–∫–∞, j
    if len(suggests) < 2:
        suggests.append({
            "title": "—Å—ã–≥—Ä–∞–µ–º –≤ –¥–Ω–¥ ?",
            "url": "https://ru.wikihow.com/–∏–≥—Ä–∞—Ç—å-–≤-D%26D",
            "hide": True
        })

    return suggests


if __name__ == '__main__':
    import os
    app.run(host='::', port=int(os.environ.get('QLOUD_HTTP_PORT', 5000)))




