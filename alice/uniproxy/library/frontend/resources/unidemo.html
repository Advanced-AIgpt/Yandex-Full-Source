<!DOCTYPE html>
<html class="no-js consumer" lang="en">
    <head>
        <meta charset="utf-8">
        <link rel="icon" type="image/vnd.microsoft.icon" href="favicon.ico" />
        <script type="text/javascript" src="//yandex.st/jquery/2.1.1/jquery.min.js"></script>
        <script type="text/javascript" src="//yandex.st/jquery-ui/1.11.1/jquery-ui.min.js"></script>
        <script type="text/javascript" src="//yastatic.net/bootstrap/3.3.1/js/bootstrap.min.js"></script>
        <link rel="stylesheet" href="//yastatic.net/bootstrap/3.3.1/css/bootstrap.min.css"/>
        <link rel="stylesheet" href="highlight/styles/idea.css"/>
        <link rel="stylesheet" href="unidemo.css"/>

        <script type="text/javascript" src="uni.js"></script>
        <script type="text/javascript" src="webspeechkit/recorder.js"></script>
        <script type="text/javascript" src="webspeechkit/tts.js"></script>
        <script type="text/javascript" src="settings.js"></script>
        <script type="text/javascript" src="highlight/highlight.pack.js"></script>

        <title>Yandex UniProxy Demo Page</title>
    </head>

    <body role="document" style="padding-top: 1em;">
        <div class="container-fluid" role="main">

            <div class="row">
                <div class="col-md-4">
                    <div class="panel panel-default">
                        <div class="panel-body">
        <!-- connection form -->
                            <form class="form-inline">
                                <div class="form-group">
                                    <div class="mic0" id="mic_div"></div>
                                </div>

                                <div class="form-group">
                                    <div class="btn-group">
                                        <input type="button" class="btn btn-default" id="connect_btn" value="Connect"/>
                                        <input type="button" class="btn btn-default" id="start_btn" value="Start"/>
                                        <input type="button" class="btn btn-default" id="stop_btn" value="Stop"/>
                                        <input type="button" class="btn btn-default" id="disconnect_btn" value="Disconnect"/>
                                    </div>
                                </div>

                                <div class="input-group">
                                    <div class="input-group-addon">Engine</div>
                                    <select class="form-control" id="select_engine">
                                        <option value="vins">VINS</option>
                                        <option value="vins_music2">VINS.MusicInput</option>
                                        <option value="messenger_voice">Messenger.VoiceInput</option>
                                        <option value="asr">ASR</option>
                                        <option value="asr_music">ASR+Music</option>
                                        <option value="asr_music2">ASR+Music2</option>
                                        <option value="bio">Biometry</option>
                                        <option value="tts">TTS</option>
                                    </select>
                                </div>
                            </form>

        <!-- connection parameters form -->
                            <div class="panel panel-default">
                                <div class="panel-heading">
                                    <h4 class="panel-title">
                                        <a data-toggle="collapse" href="#collapseAP">Advanced connection parameters</a>
                                    </h4>
                                </div>

                                <div id="collapseAP" class="panel-collapse collapse">
                                    <div class="panel-body">
                                        <form class="form-inline">
                                            <div class="form-group">
                                                <label for="voice">Voice</label>
                                                <select class="form-control" id="voice" value="shitova">
                                                    <option name="opt_voice" value="shitova">Shitova</option>
                                                    <option name="opt_voice" value="oksana">Oksana</option>
                                                    <option name="opt_voice" value="jane">Jane</option>
                                                    <option name="opt_voice" value="omazh">Omazh</option>
                                                    <option name="opt_voice" value="zahar">Zahar</option>
                                                    <option name="opt_voice" value="levitan">Levitan</option>
                                                    <option name="opt_voice" value="ermil">Ermil</option>
                                                </select>
                                            </div>

                                            <div class="form-group">
                                                <label>
                                                    <input class="form-control" type="checkbox" id="partial" name="Enable partial results" /> partials
                                                </label>
                                                <label>
                                                    <input class="form-control" type="checkbox" id="punctuation" name="Enable punctuation" /> punctuation
                                                </label>
                                                <label>
                                                    <input class="form-control" type="checkbox" id="manual_punctuation" name="Enable manual punctuation" /> manual_punctuation
                                                </label>
                                                <label>
                                                    <input class="form-control" type="checkbox" id="messenger" name="Enable messenger" /> messenger
                                                </label>
                                            </div>
                                        </form>
                                    </div>

                                    <div class="panel-body">
                                        <form class="form-inline">
                                            <div class="form-group">
                                                <label for="vins_url">VINS URL</label>
                                                <input class="form-control" type="text" id="vins_url" value="" />
                                            </div>

                                            <div class="form-group">
                                                <label>
                                                    <input class="form-control" type="checkbox" id="vins_partial" /> vins partials
                                                </label>
                                            </div>
                                        </form>

                                        <form class="form">
                                            <div class="form-group">
                                                <label for="topic">Topic</label>
                                                <input class="form-control" type="text" id="topic" value="dialogeneral" />
                                            </div>

                                            <div class="form-group">
                                                <label for="uuid">UUID</label>
                                                <input class="form-control" type="text" id="uuid" value="1234" />
                                            </div>

                                            <div class="form-group">
                                                <label for="apikey">API Key</label>
                                                <input class="form-control" type="text" id="apikey" value="dialogeneral" />
                                            </div>

                                            <div class="form-group">
                                                <label for="oauth-token">OAuth/OAuthTeam/YambAuth token</label>
                                                <input class="form-control" type="text" id="oauth-token" value="" />
                                            </div>

                                            <div class="form-group">
                                                <label for="biometry">Biometry tags</label>
                                                <input class="form-control" type="text" id="biometry" value="age,gender" />
                                            </div>

                                            <div class="form-group">
                                                <label for="experiments">Experiments</label>
                                                <input class="form-control" type="text" id="experiments" value="" />
                                            </div>

                                            <div class="form-group">
                                                <label for="grammar_context">Grammar context</label>
                                                <input class="form-control" type="text" id="grammar_context" value="" />
                                            </div>

                                            <div class="form-group">
                                                <label for="context_trigger">Context's trigger</label>
                                                <input class="form-control" type="text" id="context_trigger" value="" />
                                            </div>
                                            <div class="form-group">
                                                <label for="context_content">Context's content</label>
                                                <input class="form-control" type="text" id="context_content" value="" />
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>


<!-- TTS OPTIONS PANEL -->
                            <div id="tts_options" class="panel panel-default">
                                <div class="panel-heading">
                                    <h4 class="panel-title">
                                        <a data-toggle="collapse" href="#collapseTTS">Text for TTS</a>
                                    </h4>
                                </div>
                                <div id="collapseTTS" class="panel-collapse collapse">
                                    <div class="panel-body">
                                        <textarea class="form-control" style="width: 100%" id="tts_text" rows="10">&lt;speaker voice="shitova.gpu"&gt;Письма к Мартину Алексеевичу&lt;speaker voice="valtz"&gt;Здравствуйте дорогой Мартин Алексеич! Пишу вам сразу по приезду, прямо вот только что вошёл и сел писать. Тут всё у нас хорошо, весна вовсю, снег ещё не сошёл, но вроде бы сходит, на дороге намёрзло много, а калитку я еле отодрал — вон как пристыл внизу ледок то! Так что вошёл когда, сразу трубы проверил и понял что целы слава Богу.</textarea>
                                    </div>
                                </div>
                            </div>
<!-- TTS OPTIONS PANEL END -->

<!-- MUSIC & BIO OPTIONS PANEL -->
                            <div id="music_and_bio_options" class="panel panel-default">
                                <div class="panel-heading">
                                    <h4 class="panel-title">
                                        <a data-toggle="collapse" href="#collapseMB">Music and Biometry Options</a>
                                    </h4>
                                </div>

                                <div id="collapseMB" class="panel-collapse collapse">
                                    <div id="music_options">
                                        <div class="input-group">
                                            <div class="input-group-addon">YMusic OAuth токен</div>
                                            <input type="text" class="form-control" id="music_oauth_token" size="40"/>
                                        </div>
                                    </div>


                                    <div id="bio_options" class="panel panel-default">
                                        <div class="panel-heading">
                                            <h3 class="panel-title">Biometry options</h3>
                                        </div>

                                        <div class="panel-body">

                                            <div class="form-group form-inline">
                                                <label for="biometry_group">Biometry Group</label>
                                                <input class="form-control" type="text" id="biometry_group" value="your biometry group" />
                                            </div>

                                            <div class="panel panel-default">
                                                <div class="panel-heading">
                                                    <h3 class="panel-title">Scoring results</h3>
                                                </div>
                                                <div class="panel-body">
                                                    <div class="form-group form-inline">
                                                        <label for="bio_request_id">Request ID</label>
                                                        <input class="form-control" type="text" id="bio_request_id" value="" readonly="readonly" />
                                                        <span id="bio_status" class="label"></span>
                                                    </div>

                                                    <div class="form-group">
                                                        <table class="table">
                                                            <thead>
                                                                <tr><th>User</th><th>Score</th></tr>
                                                            </thead>
                                                            <tbody id="biometry_scoring_results" ></tbody>
                                                        </table>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="panel panel-default">
                                                <div class="panel-heading">
                                                    <h3 class="panel-title">Operations</h3>
                                                </div>
                                                <div class="panel-body">
                                                    <div class="form-group form-inline">
                                                        <label for="bio_user_id">User ID</label>
                                                        <input class="form-control" type="text" id="bio_user_id" value="" />
                                                    </div>
                                                    <div class="form-group form-inline">
                                                        <label for="bio_requests">Request IDs (for creation)</label>
                                                        <input class="form-control" type="text" id="bio_requests" value="" />
                                                    </div>
                                                    <div class="form-group form-inline">
                                                        <input type="button" class="btn btn-default" id="bio_create_user" value="Create user"/>
                                                        <input type="button" class="btn btn-default" id="bio_remove_user" value="Remove user"/>
                                                        <span id="bio_user_status" class="label label-success" style="display:none">ok</span>
                                                    </div>
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                </div>
                            </div>
<!-- MUSIC AND BIO OPTIONS END -->

<!-- MESSENGER OPTIONS PANEL -->
                            <div id="messenger_options" class="panel panel-default">
                                <div class="panel-heading">
                                    <h4 class="panel-title">
                                        <a data-toggle="collapse" href="#collapseM">Messenger options</a>
                                    </h4>
                                </div>

                                <div id="collapseM" class="panel-collapse collapse">
                                    <div class="panel-body">
                                        <div class="form">
                                            <div class="form-group">
                                                <label for="voice-fanout-chat-id" title="Chat ID">ChatId</label>
                                                <input id="voice-fanout-chat-id" class="form-control" type="text" value="" />
                                            </div>

                                            <div class="form-group">
                                                <label for="voice-fanout-guid" title="GUID">ToGuid</label>
                                                <input id="voice-fanout-guid" class="form-control" type="text" value="" />
                                            </div>

                                            <div class="form-group">
                                                <label for="voice-fanout-payload-id" title="Payload ID">PayloadID</label>
                                                <input id="voice-fanout-payload-id" class="form-control" type="text" value="" />
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
<!-- MESSENGER OPTIONS END -->


                        </div>
                    </div>

                    <div id="raw_event_panel" class="panel panel-default">
                        <div class="panel-heading">
                            <h4 class="panel-title">
                                <a data-toggle="collapse" href="#collapseVI">Send Raw Event</a>
                            </h4>
                        </div>
                        <div id="collapseVI" class="panel-collapse collapse">
                            <div class="panel-body">
                                <div class="form-group">
                                    <textarea id="raw_event_input" class="form-control" rows="10">
        {
            "event": {
                "header": {
                    "namespace": "VINS",
                    "name": "TextInput",
                    "messageId": "uuid4"
                },
                "payload": {
                    "header": {
                        "request_id": "uuid4"
                    },
                    "request": {
                        "event": {
                            "text": "кто такой путин?",
                            "type": "text_input",
                            "voice_session": true
                        },
                        "additional_options":{
                            "bass_options":{
                                "client_ip":"::1"
                            }
                        }
                    },
                    "application": {
                        "uuid": "ffffffffffffffff8cfd96f81c28df46",
                        "os_version": "5.0",
                        "app_id": "uniproxy.monitoring",
                        "platform": "android",
                        "lang": "ru-RU",
                        "app_version": "1.2.3",
                        "client_time": "20170725T140401",
                        "timezone": "Europe/Moscow",
                        "timestamp": "1500991501"
                    }
                }
            }
        }
                                    </textarea>
                                    <input type="button" class="btn btn-default" id="send_raw_event_btn" value="Send"/>
                                </div>
                            </div>
                        </div>
                    </div>

        <!--

            SEND FANOUT MESSAGE PANEL

        -->

                    <div id="fanout_message_panel" class="panel panel-default">
                        <div class="panel-heading">
                            <h4 class="panel-title">
                                <a data-toggle="collapse" href="#collapseVI_2_2">Send Fanout Message</a>
                            </h4>
                        </div>

                        <div id="collapseVI_2_2" class="panel-collapse collapse">
                            <div class="panel-body">
                                <div class="form">
                                    <div class="form-group">
                                        <label for="fanout-chat-id" title="Chat ID">ChatId</label>
                                        <input id="fanout-chat-id" class="form-control" type="text" value="" />
                                    </div>

                                    <div class="form-group">
                                        <label for="fanout-guid" title="GUID">ToGuid</label>
                                        <input id="fanout-guid" class="form-control" type="text" value="" />
                                    </div>

                                    <div class="form-group">
                                        <label for="fanout-type" title="Message type">Type</label>
                                        <input id="fanout-type" class="form-control" type="text" value="" />
                                    </div>

                                    <div class="form-group">
                                        <label for="fanout-payload-id" title="Payload ID">PayloadID</label>
                                        <input id="fanout-payload-id" class="form-control" type="text" value="" />
                                    </div>

                                    <div class="form-group">
                                        <label for="fanout-payload-data" title="Payload Data">PayloadData</label>
                                        <textarea id="fanout-payload-data" class="form-control" rows="10">
{
    "chat_id": "100",
    "text": "Hello world!",
    "message_id": "420024",
    "timezone": 180
}
                                        </textarea>
                                    </div>

                                    <div class="form-group">
                                        <input type="button" class="btn btn-primary" id="btn-fanout-push-message" value="push2fanout"/>
                                        <input type="button" class="btn btn-primary" id="btn-fanout-push-message-2" value="push2fanout new"/>
                                        <input type="button" class="btn btn-secondary" id="btn-uniproxy-push-message" value="push2uniproxy"/>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>


        <!--

            END SEND FANOUT MESSAGE PANEL

        -->

        <!--
            HISTORY REQUEST PANEL
        -->
                    <div id="fanout_history_panel" class="panel panel-default">
                        <div class="panel-heading">
                            <h4 class="panel-title">
                                <a data-toggle="collapse" href="#collapseVI_2_3">Send History Request</a>
                            </h4>
                        </div>

                        <div id="collapseVI_2_3" class="panel-collapse collapse">
                            <div class="panel-body">
                                <div class="form">
                                    <div class="form-group">
                                        <label for="history-guid" title="GUID">Guid</label>
                                        <input id="history-guid" class="form-control" type="text" value="" />
                                    </div>

                                    <div class="form-group">
                                        <label for="history-chat-id" title="Chat ID">ChatId</label>
                                        <input id="history-chat-id" class="form-control" type="text" value="" />
                                    </div>

                                    <div class="form-group">
                                        <label for="history-min-ts" title="Min timestamp">Min timestamp</label>
                                        <input id="history-min-ts" class="form-control" type="text" value="" />
                                    </div>

                                    <div class="form-group">
                                        <label for="history-max-ts" title="Max timestamp">Max timestamp</label>
                                        <input id="history-max-ts" class="form-control" type="text" value="" />
                                    </div>

                                    <div class="form-group">
                                        <label for="history-limit" title="Limit">Limit</label>
                                        <input id="history-limit" class="form-control" type="text" value="" />
                                    </div>

                                    <div class="form-group">
                                        <label for="history-offset" title="Offset">Offset</label>
                                        <input id="history-offset" class="form-control" type="text" value="" />
                                    </div>

                                    <div class="form-group">
                                        <label for="history-request-id" title="Request ID">Request ID</label>
                                        <input id="history-request-id" class="form-control" type="text" value="" />
                                    </div>

                                    <div class="form-group">
                                        <input type="button" class="btn btn-primary" id="btn-history-request" value="HistoryRequest"/>
                                        <input type="button" class="btn btn-secondary" id="btn-edit-history-request" value="EditHistoryRequest"/>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
        <!--
            END HISTORY REQUEST PANEL
        -->


        <!--
            SUBSCRIPTION REQUEST PANEL
        -->
                    <div id="fanout_subscription_panel" class="panel panel-default">
                        <div class="panel-heading">
                            <h4 class="panel-title">
                                <a data-toggle="collapse" href="#collapseVI_2_4">Send Subscription Request</a>
                            </h4>
                        </div>

                        <div id="collapseVI_2_4" class="panel-collapse collapse">
                            <div class="panel-body">
                                <div class="form">
                                    <div class="form-group">
                                        <label for="subscription-guid" title="GUID">Guid</label>
                                        <input id="subscription-guid" class="form-control" type="text" value="" />
                                    </div>

                                    <div class="form-group">
                                        <label for="subscription-chat-id" title="Chat ID">ChatId</label>
                                        <input id="subscription-chat-id" class="form-control" type="text" value="" />
                                    </div>

                                    <div class="form-group">
                                        <label for="subscription-to-guid" title="To GUID">To Guid</label>
                                        <input id="subscription-to-guid" class="form-control" type="text" value="" />
                                    </div>

                                    <div class="form-group">
                                        <label for="subscription-message-type" title="Message Type">Message Type</label>
                                        <input id="subscription-message-type" class="form-control" type="text" value="" />
                                    </div>

                                    <div class="form-group">
                                        <label for="subscription-ttl" title="TTL">TTL, ms</label>
                                        <input id="subscription-ttl" class="form-control" type="text" value="" />
                                    </div>

                                    <div class="form-group">
                                        <label for="subscription-request-id" title="Request ID">Request ID</label>
                                        <input id="subscription-request-id" class="form-control" type="text" value="" />
                                    </div>

                                    <div class="form-group">
                                        <input type="button" class="btn btn-primary" id="btn-subscription-request" value="Make subscription request"/>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
        <!--
            END SUBSCRIPTION REQUEST PANEL
        -->

        <!--

            SET VOICE CHATS PANEL

        -->

                    <div id="set_voice_chats_message_panel" class="panel panel-default">
                        <div class="panel-heading">
                            <h4 class="panel-title">
                                <a data-toggle="collapse" href="#collapseSVC">Set Voice Chats</a>
                            </h4>
                        </div>

                        <div id="collapseSVC" class="panel-collapse collapse">
                            <div class="panel-body">
                                <div class="form">
                                    <div class="form-group">
                                        <label for="set-voice-chats-ids" title="Chat IDs">ChatId</label>
                                        <input id="set-voice-chats-ids" class="form-control" type="text" value="" />
                                    </div>

                                    <div class="form-group">
                                        <input type="button" class="btn btn-primary" id="btn-set-voice-chats" value="set"/>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>


        <!--

            END SEND FANOUT MESSAGE PANEL

        -->
                </div> <!-- class="col-md-4" -->

                <div class="col-md-8">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <h3 class="panel-title">Event log</h3>
                        </div>
                        <div class="panel-body">
                            <table class="table table-hover">
                                <thead>
                                    <tr><th>Time</th><th>Message</th><th>Header</th><th>Payload</th></tr>
                                </thead>
                                <tbody id="events_log">
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div> <!-- class="col-md-8" -->
            </div> <!-- class="row" -->
        </div> <!-- class="container-fluid" -->

        <script type="text/javascript" src="unidemo.js"></script>
    </body>
</html>
